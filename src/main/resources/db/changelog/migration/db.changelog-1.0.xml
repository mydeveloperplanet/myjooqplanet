<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
	  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

  <changeSet author="gunter" id="changelog-1.0">

    <createTable tableName="customer">
      <column name="id" type="serial" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="first_name" type="varchar(255)">
        <constraints nullable="false"/>
      </column>
      <column name="last_name" type="varchar(255)">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <createTable tableName="address">
      <column name="id" type="serial" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="street" type="varchar(255)" />
      <column name="city" type="varchar(255)" />
      <column name="country" type="varchar(255)"/>
      <column name="customer_id" type="integer">
        <constraints foreignKeyName="address_customer_fk" referencedTableName="customer" referencedColumnNames="id"/>
      </column>
    </createTable>

    <createTable tableName="order">
      <column name="id" type="serial" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="customer_id" type="integer">
        <constraints foreignKeyName="order_customer_fk" referencedTableName="customer" referencedColumnNames="id"/>
      </column>
    </createTable>

    <createTable tableName="article">
      <column name="id" type="serial" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="varchar(255)" />
    </createTable>

    <createTable tableName="order_article">
      <column name="order_id" type="integer">
        <constraints foreignKeyName="order_article_order_fk" referencedTableName="order" referencedColumnNames="id"/>
      </column>
      <column name="article_id" type="integer">
        <constraints foreignKeyName="order_article_article_fk" referencedTableName="article" referencedColumnNames="id"/>
      </column>
      <column name="number" type="integer" />
    </createTable>

  </changeSet>

</databaseChangeLog>